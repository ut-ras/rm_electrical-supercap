Version 4.1
SHEET 1 1916 704
WIRE -672 -528 -768 -528
WIRE -496 -528 -672 -528
WIRE -448 -528 -496 -528
WIRE -352 -528 -368 -528
WIRE -272 -528 -352 -528
WIRE -176 -528 -272 -528
WIRE 176 -528 -80 -528
WIRE 304 -528 176 -528
WIRE -768 -496 -768 -528
WIRE 304 -496 304 -528
WIRE -496 -480 -496 -528
WIRE -432 -480 -496 -480
WIRE -352 -480 -352 -528
WIRE -352 -480 -400 -480
WIRE -432 -464 -432 -480
WIRE -400 -464 -400 -480
WIRE -160 -464 -160 -480
WIRE -768 -400 -768 -416
WIRE 304 -400 304 -432
WIRE -496 -352 -496 -480
WIRE -448 -352 -448 -368
WIRE -448 -352 -496 -352
WIRE -416 -336 -416 -368
WIRE -192 -336 -208 -336
WIRE -64 -336 -192 -336
WIRE 176 -336 176 -528
WIRE 176 -336 32 -336
WIRE -384 -272 -384 -368
WIRE -48 -272 -48 -288
WIRE -208 -256 -208 -336
WIRE -384 -240 -384 -272
WIRE -208 -160 -208 -176
WIRE -384 -144 -384 -160
WIRE -32 -96 -112 -96
WIRE 128 -96 32 -96
WIRE 1296 -80 1216 -80
WIRE 1456 -80 1360 -80
WIRE -592 16 -656 16
WIRE -528 16 -592 16
WIRE -592 32 -592 16
WIRE -112 32 -112 -96
WIRE -48 32 -112 32
WIRE 128 32 128 -96
WIRE 128 32 32 32
WIRE 1216 32 1216 -80
WIRE 1280 32 1216 32
WIRE 1456 32 1456 -80
WIRE 1456 32 1360 32
WIRE -1088 80 -1088 48
WIRE -592 144 -592 112
WIRE -1088 176 -1088 160
WIRE -1088 176 -1104 176
WIRE 0 176 0 144
WIRE 0 176 -16 176
WIRE 1328 176 1328 144
WIRE 1328 176 1312 176
WIRE -1088 192 -1088 176
WIRE -240 192 -288 192
WIRE -112 192 -112 32
WIRE -112 192 -160 192
WIRE 1088 192 1040 192
WIRE 1216 192 1216 32
WIRE 1216 192 1168 192
WIRE -1232 224 -1232 208
WIRE -112 240 -112 192
WIRE -64 240 -112 240
WIRE 1216 240 1216 192
WIRE 1264 240 1216 240
WIRE 128 256 128 32
WIRE 128 256 96 256
WIRE 192 256 128 256
WIRE 352 256 272 256
WIRE 400 256 352 256
WIRE 1456 256 1456 32
WIRE 1456 256 1424 256
WIRE 1552 256 1456 256
WIRE 1712 256 1632 256
WIRE 1824 256 1712 256
WIRE -64 272 -112 272
WIRE 1264 272 1216 272
WIRE -1088 288 -1088 272
WIRE -528 304 -560 304
WIRE -384 304 -528 304
WIRE -176 304 -304 304
WIRE -112 304 -112 272
WIRE -112 304 -176 304
WIRE 352 304 352 256
WIRE 880 304 832 304
WIRE 1216 304 1216 272
WIRE 1216 304 960 304
WIRE 1712 304 1712 256
WIRE -1232 320 -1232 304
WIRE -560 320 -560 304
WIRE -112 336 -112 304
WIRE 0 336 -16 336
WIRE 1216 336 1216 304
WIRE 1328 336 1312 336
WIRE -560 416 -560 400
WIRE 352 416 352 368
WIRE 1712 416 1712 368
WIRE -1088 432 -1088 416
WIRE 1216 448 1216 416
WIRE 1328 448 1328 336
WIRE 1328 448 1216 448
WIRE -112 464 -112 416
WIRE 0 464 0 336
WIRE 0 464 -112 464
WIRE 0 512 0 464
WIRE 1328 512 1328 448
WIRE -1088 528 -1088 512
FLAG -768 -400 0
FLAG -208 -160 0
FLAG 304 -400 0
FLAG -384 -144 0
FLAG -416 -336 0
FLAG -384 -272 CURR
FLAG -672 -528 IN
FLAG -272 -528 SPLIT
FLAG 176 -528 OUT
FLAG -160 -464 GATE
FLAG -560 416 0
FLAG -528 304 CURR_LIMIT
FLAG -192 -336 CAP
FLAG -1088 48 VCC
FLAG -48 -272 GATEC
FLAG -1088 288 VEE
FLAG -1104 176 0
FLAG -1088 528 0
FLAG -1088 416 24V
FLAG -288 192 CURR_B
FLAG 1824 256 GATEC
FLAG 400 256 GATE
FLAG 0 512 VEE
FLAG 832 304 CURR_B
FLAG 1328 512 VEE
FLAG 1040 192 CURR_LIMIT
FLAG -112 -96 +
FLAG -176 304 -
FLAG 0 144 VCC
FLAG 1328 144 VCC
FLAG -592 16 CURR_B
FLAG -592 144 0
FLAG -1232 320 0
FLAG -1232 208 5V
FLAG 352 416 5V
FLAG 1712 416 5V
SYMBOL voltage -768 -512 R0
WINDOW 123 24 152 Left 2
WINDOW 39 24 124 Left 2
SYMATTR InstName V1
SYMATTR Value 24
SYMBOL voltage -208 -272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V2
SYMATTR Value 24
SYMBOL res -368 -256 M0
SYMATTR InstName R1
SYMATTR Value 100k
SYMATTR SpiceLine tol=5
SYMBOL INA138 -416 -416 M90
SYMATTR InstName U1
SYMBOL res -352 -544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 20m
SYMBOL voltage -560 304 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 1
SYMBOL voltage -1088 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 30
SYMBOL voltage -1088 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 0
SYMBOL load 288 -496 R0
WINDOW 123 48 36 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 2.5
SYMATTR InstName I1
SYMATTR Value 2.5
SYMBOL nmos 32 -288 M270
SYMATTR InstName M1
SYMATTR Value BSC059N04LS
SYMBOL nmos -80 -480 M270
SYMATTR InstName M2
SYMATTR Value BSC059N04LS
SYMBOL voltage -1088 416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 24
SYMBOL res -144 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {R}
SYMBOL res 48 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {A*R}
SYMBOL res 976 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R}
SYMBOL res 1184 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL res 1232 320 M0
SYMATTR InstName R7
SYMATTR Value {A*R}
SYMBOL cap 32 -112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {1/(A*R*wc)}
SYMBOL res -288 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R}
SYMBOL res -96 320 M0
SYMATTR InstName R9
SYMATTR Value {A*R}
SYMBOL res 1376 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {A*R}
SYMBOL cap 1360 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {1/(A*R*wc)}
SYMBOL OPA551 16 256 R0
SYMATTR InstName U2
SYMBOL OPA551 1344 256 R0
SYMATTR InstName U3
SYMBOL voltage -592 16 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V9
SYMATTR Value 1
SYMBOL voltage -1232 208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 5
SYMBOL res 288 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 100
SYMBOL diode 336 368 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 1648 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL diode 1696 368 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
TEXT -968 -208 Left 2 ;.op
TEXT -968 -176 Left 2 ;.tran 0 {simtime} {simtime/10}
TEXT -968 -144 Left 2 !.ac dec 20 0.01 10Meg
TEXT -712 -40 Left 2 !.param simtime=10m
TEXT -560 600 Left 2 !;.param A=1000 wc=10k R=2.5k
TEXT -560 640 Left 2 !.param A=1000 wc=2.5k R=1000
TEXT -552 688 Left 2 !;.step dec param wc 2.5k 2.5Meg 2
TEXT 56 624 Left 2 !;.ic V(GATE)=28.885086 V(GATEC)=1.3428587
