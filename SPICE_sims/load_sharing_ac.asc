Version 4
SHEET 1 2060 1336
WIRE -128 -304 -224 -304
WIRE 48 -304 -128 -304
WIRE 96 -304 48 -304
WIRE 192 -304 176 -304
WIRE 272 -304 192 -304
WIRE 368 -304 272 -304
WIRE 720 -304 464 -304
WIRE 848 -304 720 -304
WIRE -224 -272 -224 -304
WIRE 848 -272 848 -304
WIRE 1072 -272 1072 -304
WIRE 1296 -272 1296 -304
WIRE 48 -256 48 -304
WIRE 112 -256 48 -256
WIRE 192 -256 192 -304
WIRE 192 -256 144 -256
WIRE 112 -240 112 -256
WIRE 144 -240 144 -256
WIRE 384 -240 384 -256
WIRE -224 -176 -224 -192
WIRE 848 -176 848 -208
WIRE 1296 -176 1296 -192
WIRE 1072 -160 1072 -192
WIRE 48 -128 48 -256
WIRE 96 -128 96 -144
WIRE 96 -128 48 -128
WIRE 128 -112 128 -144
WIRE 352 -112 336 -112
WIRE 480 -112 352 -112
WIRE 720 -112 720 -304
WIRE 720 -112 576 -112
WIRE 160 -48 160 -144
WIRE 496 -48 496 -64
WIRE 336 -32 336 -112
WIRE 160 -16 160 -48
WIRE 336 64 336 48
WIRE 160 80 160 64
WIRE 368 128 288 128
WIRE 528 128 432 128
WIRE 1104 144 1024 144
WIRE 1264 144 1168 144
WIRE -272 224 -336 224
WIRE -208 224 -272 224
WIRE 288 256 288 128
WIRE 352 256 288 256
WIRE 528 256 528 128
WIRE 528 256 432 256
WIRE 1024 256 1024 144
WIRE 1088 256 1024 256
WIRE 1264 256 1264 144
WIRE 1264 256 1168 256
WIRE -544 304 -544 272
WIRE -336 304 -336 224
WIRE -320 304 -336 304
WIRE -208 320 -208 224
WIRE -208 320 -256 320
WIRE -320 336 -352 336
WIRE -288 368 -288 352
WIRE -544 400 -544 384
WIRE -544 400 -560 400
WIRE 384 400 384 368
WIRE 1120 400 1120 368
WIRE -544 416 -544 400
WIRE 160 416 112 416
WIRE 288 416 288 256
WIRE 288 416 240 416
WIRE 896 416 848 416
WIRE 1024 416 1024 256
WIRE 1024 416 976 416
WIRE 288 464 288 416
WIRE 336 464 288 464
WIRE 1024 464 1024 416
WIRE 1072 464 1024 464
WIRE 528 480 528 256
WIRE 528 480 496 480
WIRE 560 480 528 480
WIRE 1264 480 1264 256
WIRE 1264 480 1232 480
WIRE 1312 480 1264 480
WIRE 336 496 288 496
WIRE 1072 496 1024 496
WIRE -544 512 -544 496
WIRE 16 528 -16 528
WIRE 160 528 16 528
WIRE 288 528 288 496
WIRE 288 528 240 528
WIRE 896 528 848 528
WIRE 1024 528 1024 496
WIRE 1024 528 976 528
WIRE -16 544 -16 528
WIRE 288 560 288 528
WIRE 1024 560 1024 528
WIRE 416 592 416 560
WIRE 1152 592 1152 560
WIRE -16 640 -16 624
WIRE -544 656 -544 640
WIRE 288 672 288 640
WIRE 1024 672 1024 640
WIRE 384 704 384 560
WIRE 416 704 416 672
WIRE 416 704 384 704
WIRE 1120 704 1120 560
WIRE 1152 704 1152 672
WIRE 1152 704 1120 704
WIRE 384 736 384 704
WIRE 1120 736 1120 704
WIRE -544 752 -544 736
FLAG -224 -176 0
FLAG 336 64 0
FLAG 848 -176 0
FLAG 160 80 0
FLAG 128 -112 0
FLAG 160 -48 CURR
FLAG -128 -304 IN
FLAG 272 -304 SPLIT
FLAG 720 -304 OUT
FLAG 384 -240 GATE
FLAG -16 640 0
FLAG 16 528 CURR_LIMIT
FLAG 352 -112 CAP
FLAG 112 416 CURR_B
FLAG 1072 -304 GATE
FLAG -544 272 VCC
FLAG 496 -48 GATEC
FLAG -544 512 VEE
FLAG -560 400 0
FLAG 1072 -160 0
FLAG 1296 -176 0
FLAG 1296 -304 GATEC
FLAG 1312 480 GATEC_R
FLAG 560 480 GATE_R
FLAG 384 368 VCC
FLAG 384 736 VEE
FLAG 288 672 0
FLAG -544 752 0
FLAG -544 640 24V
FLAG -352 336 CURR
FLAG -288 288 VCC
FLAG -288 368 0
FLAG -272 224 CURR_B
FLAG 848 528 CURR_B
FLAG 1120 368 VCC
FLAG 1120 736 VEE
FLAG 1024 672 0
FLAG 848 416 CURR_LIMIT
SYMBOL voltage -224 -288 R0
WINDOW 123 24 152 Left 2
WINDOW 39 24 124 Left 2
SYMATTR InstName V1
SYMATTR Value 24
SYMBOL voltage 336 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V2
SYMATTR Value 24
SYMBOL res 176 -32 M0
SYMATTR InstName R1
SYMATTR Value 100k
SYMATTR SpiceLine tol=5
SYMBOL INA138 128 -192 M90
SYMATTR InstName U1
SYMBOL res 192 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 20m
SYMBOL voltage -16 528 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 0.39
SYMBOL voltage -544 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 30
SYMBOL voltage -544 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 30
SYMBOL load 832 -272 R0
WINDOW 123 48 36 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName I2
SYMATTR Value 1
SYMBOL nmos 576 -64 M270
SYMATTR InstName M2
SYMATTR Value BSC059N04LS
SYMBOL voltage 1072 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 26.314154
SYMBOL voltage 1296 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value -26.179861
SYMBOL OPA551 416 480 R0
SYMATTR InstName U3
SYMBOL res 400 576 R0
SYMATTR InstName R3
SYMATTR Value 47k
SYMBOL nmos 464 -256 M270
SYMATTR InstName M1
SYMATTR Value BSC059N04LS
SYMBOL res 256 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R}
SYMBOL res 256 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL res 304 544 M0
SYMATTR InstName R7
SYMATTR Value {A*R}
SYMBOL res 448 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {A*R}
SYMBOL voltage -544 640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 24
SYMBOL OpAmps\\UniversalOpAmp2 -288 320 R0
SYMATTR InstName U4
SYMBOL res 1136 576 R0
SYMATTR InstName R9
SYMATTR Value 47k
SYMBOL res 992 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {R}
SYMBOL res 992 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value {R}
SYMBOL res 1040 544 M0
SYMATTR InstName R12
SYMATTR Value {A*R}
SYMBOL res 1184 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value {A*R}
SYMBOL OPA551 1152 480 R0
SYMATTR InstName U2
SYMBOL cap 432 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {1/(A*R*wc)}
SYMBOL cap 1168 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {1/(A*R*wc)}
TEXT -424 16 Left 2 ;.op
TEXT -424 48 Left 2 ;.tran 0 {simtime} {simtime/10} startup uic
TEXT -424 80 Left 2 !.ac dec 20 0.01 10Meg
TEXT -168 184 Left 2 !.param simtime=1m
TEXT -16 824 Left 2 !.param A=10000 wc=100 R=250
