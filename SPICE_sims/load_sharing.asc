Version 4
SHEET 1 2876 1816
WIRE -192 80 -288 80
WIRE -16 80 -192 80
WIRE 32 80 -16 80
WIRE 128 80 112 80
WIRE 256 80 128 80
WIRE 304 80 256 80
WIRE 560 80 400 80
WIRE 688 80 560 80
WIRE 832 80 688 80
WIRE 832 96 832 80
WIRE -288 112 -288 80
WIRE -16 128 -16 80
WIRE 48 128 -16 128
WIRE 128 128 128 80
WIRE 128 128 80 128
WIRE 48 144 48 128
WIRE 80 144 80 128
WIRE 320 144 320 128
WIRE 832 192 832 160
WIRE -288 208 -288 192
WIRE -16 256 -16 128
WIRE 32 256 32 240
WIRE 32 256 -16 256
WIRE 64 272 64 240
WIRE 224 272 208 272
WIRE 400 272 224 272
WIRE 560 272 560 80
WIRE 560 272 496 272
WIRE 96 336 96 240
WIRE 416 336 416 320
WIRE 208 352 208 272
WIRE 96 368 96 336
WIRE 208 448 208 432
WIRE 96 464 96 448
WIRE 400 544 320 544
WIRE 560 544 464 544
WIRE 1136 560 1056 560
WIRE 1296 560 1200 560
WIRE -96 656 -160 656
WIRE -32 656 -96 656
WIRE 320 672 320 544
WIRE 384 672 320 672
WIRE 560 672 560 544
WIRE 560 672 464 672
WIRE 1056 672 1056 560
WIRE 1120 672 1056 672
WIRE 1296 672 1296 560
WIRE 1296 672 1200 672
WIRE -384 688 -384 656
WIRE -160 736 -160 656
WIRE -144 736 -160 736
WIRE -32 752 -32 656
WIRE -32 752 -80 752
WIRE -144 768 -176 768
WIRE -384 784 -384 768
WIRE -384 784 -400 784
WIRE -384 800 -384 784
WIRE -112 800 -112 784
WIRE 1152 816 1152 784
WIRE 192 832 144 832
WIRE 320 832 320 672
WIRE 320 832 272 832
WIRE 928 832 880 832
WIRE 1056 832 1056 672
WIRE 1056 832 1008 832
WIRE 416 864 416 784
WIRE 320 880 320 832
WIRE 384 880 320 880
WIRE 1056 880 1056 832
WIRE 1104 880 1056 880
WIRE -384 896 -384 880
WIRE 560 896 560 672
WIRE 560 896 448 896
WIRE 592 896 560 896
WIRE 1296 896 1296 672
WIRE 1296 896 1264 896
WIRE 1344 896 1296 896
WIRE 384 912 320 912
WIRE 1104 912 1056 912
WIRE -208 944 -240 944
WIRE -96 944 -208 944
WIRE 320 944 320 912
WIRE 320 944 -16 944
WIRE 416 944 416 928
WIRE 448 944 416 944
WIRE 720 944 672 944
WIRE 928 944 800 944
WIRE 1056 944 1056 912
WIRE 1056 944 928 944
WIRE -240 960 -240 944
WIRE 320 976 320 944
WIRE 1056 976 1056 944
WIRE 928 992 928 944
WIRE 448 1008 448 944
WIRE 1184 1008 1184 976
WIRE -240 1056 -240 1040
WIRE 320 1088 320 1056
WIRE 416 1088 416 944
WIRE 416 1088 320 1088
WIRE 928 1088 928 1056
WIRE 1056 1088 1056 1056
WIRE 1056 1088 928 1088
WIRE 1152 1088 1152 976
WIRE 1152 1088 1056 1088
WIRE 416 1120 416 1088
WIRE 448 1120 448 1088
WIRE 448 1120 416 1120
WIRE 1152 1120 1152 1088
WIRE 1184 1120 1184 1088
WIRE 1184 1120 1152 1120
WIRE 416 1152 416 1120
WIRE 1152 1152 1152 1120
FLAG -288 208 0
FLAG 208 448 0
FLAG 832 192 0
FLAG 96 464 0
FLAG 64 272 0
FLAG 96 336 CURR
FLAG -192 80 IN
FLAG 256 80 SPLIT
FLAG 320 144 GATE
FLAG 224 272 CAP
FLAG -384 656 VCC
FLAG 416 336 GATEC
FLAG -384 896 VEE
FLAG -400 784 0
FLAG -240 1056 0
FLAG -208 944 CURR_LIMIT
FLAG -176 768 CURR
FLAG -112 720 VCC
FLAG -112 800 0
FLAG -96 656 CURR_B
FLAG 144 832 CURR_B
FLAG 1344 896 GATEC
FLAG 592 896 GATE
FLAG 416 784 VCC
FLAG 416 1152 VEE
FLAG 672 944 CURR_B
FLAG 1152 784 VCC
FLAG 1152 1152 VEE
FLAG 880 832 CURR_LIMIT
FLAG 688 80 OUT
SYMBOL voltage -288 96 R0
WINDOW 123 24 152 Left 2
WINDOW 39 24 124 Left 2
SYMATTR InstName V1
SYMATTR Value 24
SYMBOL voltage 208 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V2
SYMATTR Value 24
SYMBOL res 80 352 R0
SYMATTR InstName R2
SYMATTR Value 50k
SYMATTR SpiceLine tol=5
SYMBOL INA138 64 192 M90
SYMATTR InstName U1
SYMBOL res 128 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 20m
SYMBOL voltage -384 672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 30
SYMBOL voltage -384 784 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 0
SYMBOL load 816 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I3
SYMATTR Value PULSE(1 {Imax} {simtime/2} 10u 10u {simtime/10} {simtime/5} 1)
SYMBOL nmos 400 128 M270
SYMATTR InstName M1
SYMATTR Value BSC059N04LS
SYMBOL nmos 496 320 M270
SYMATTR InstName M2
SYMATTR Value BSC059N04LS
SYMBOL voltage -240 944 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 0.39
SYMBOL OpAmps\\UniversalOpAmp2 -112 752 R0
SYMATTR InstName U5
SYMBOL res 432 992 R0
SYMATTR InstName R1
SYMATTR Value 47k
SYMBOL res 0 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R}
SYMBOL res 288 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {R}
SYMBOL res 336 960 M0
SYMATTR InstName R14
SYMATTR Value {A*R}
SYMBOL res 480 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value {A*R}
SYMBOL res 1168 992 R0
SYMATTR InstName R16
SYMATTR Value 47k
SYMBOL res 816 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value {R}
SYMBOL res 1024 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value {R}
SYMBOL res 1072 960 M0
SYMATTR InstName R19
SYMATTR Value {A*R}
SYMBOL res 1216 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value {A*R}
SYMBOL OPA551 1184 896 R0
SYMATTR InstName U6
SYMBOL cap 464 528 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {1/(A*R*wc)}
SYMBOL cap 1200 544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {1/(A*R*wc)}
SYMBOL cap 944 1056 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C5
SYMATTR Value {1/(A*R*wc)}
SYMBOL OpAmps\\UniversalOpAmp3 416 896 R0
SYMATTR InstName U2
TEXT -488 400 Left 2 ;.op
TEXT -488 432 Left 2 !.tran 0 {simtime} {simtime/10} startup uic
TEXT -488 464 Left 2 ;.ac dec 20 0.01 10G
TEXT -232 568 Left 2 !.param simtime=10m
TEXT 752 432 Left 2 !;.step param Imax list 4 5
TEXT 760 464 Left 2 !.param Imax=10
TEXT -232 536 Left 2 !;.step dec param simtime 100m 10m 7
TEXT 480 1424 Left 2 !;.param A=1000 wc=100 R=2.5k
TEXT 520 1472 Left 2 !;.step dec param A 1k 10k 4
TEXT 480 1392 Left 2 !.param A=100 wc=20k R=1k
