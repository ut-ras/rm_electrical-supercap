Version 4
SHEET 1 2876 2360
WIRE -192 80 -288 80
WIRE -160 80 -192 80
WIRE -96 80 -160 80
WIRE -64 80 -96 80
WIRE 48 80 16 80
WIRE 256 80 48 80
WIRE 304 80 256 80
WIRE 592 80 400 80
WIRE 672 80 592 80
WIRE 736 80 672 80
WIRE 1280 80 736 80
WIRE 736 96 736 80
WIRE 1280 96 1280 80
WIRE -288 112 -288 80
WIRE 320 144 320 128
WIRE -96 160 -96 80
WIRE 48 160 48 80
WIRE 736 192 736 160
WIRE 1280 192 1280 176
WIRE -288 208 -288 192
WIRE -160 240 -160 80
WIRE -112 240 -160 240
WIRE 96 256 64 256
WIRE 224 272 208 272
WIRE 400 272 224 272
WIRE 592 272 592 80
WIRE 592 272 496 272
WIRE 96 304 96 256
WIRE 416 336 416 320
WIRE 208 352 208 272
WIRE 80 416 -16 416
WIRE 160 416 80 416
WIRE 208 448 208 432
WIRE -32 480 -32 272
WIRE -16 528 -16 416
WIRE 16 528 -16 528
WIRE 160 544 160 416
WIRE 160 544 144 544
WIRE 448 544 368 544
WIRE 608 544 512 544
WIRE -32 560 -32 480
WIRE 16 560 -32 560
WIRE 1184 560 1104 560
WIRE 1344 560 1248 560
WIRE -32 592 -32 560
WIRE 368 672 368 544
WIRE 432 672 368 672
WIRE 608 672 608 544
WIRE 608 672 512 672
WIRE 1104 672 1104 560
WIRE 1168 672 1104 672
WIRE 1344 672 1344 560
WIRE 1344 672 1248 672
WIRE -384 688 -384 656
WIRE -32 688 -32 672
WIRE -384 784 -384 768
WIRE -384 784 -400 784
WIRE -384 800 -384 784
WIRE 192 832 144 832
WIRE 368 832 368 672
WIRE 368 832 272 832
WIRE 480 832 480 800
WIRE 944 832 896 832
WIRE 1104 832 1104 672
WIRE 1104 832 1024 832
WIRE 1216 832 1216 800
WIRE 368 880 368 832
WIRE 416 880 368 880
WIRE 1104 880 1104 832
WIRE 1152 880 1104 880
WIRE -384 896 -384 880
WIRE 608 896 608 672
WIRE 608 896 544 896
WIRE 720 896 608 896
WIRE 1344 896 1344 672
WIRE 1344 896 1280 896
WIRE 1472 896 1344 896
WIRE 416 912 368 912
WIRE 1152 912 1104 912
WIRE 64 944 32 944
WIRE 192 944 64 944
WIRE 304 944 272 944
WIRE 368 944 368 912
WIRE 368 944 304 944
WIRE 944 944 896 944
WIRE 1104 944 1104 912
WIRE 1104 944 1024 944
WIRE 32 960 32 944
WIRE 368 976 368 944
WIRE 1104 976 1104 944
WIRE 32 1056 32 1040
WIRE 1104 1088 1104 1056
WIRE 1216 1088 1216 960
WIRE 1216 1088 1104 1088
WIRE 368 1104 368 1056
WIRE 480 1104 480 960
WIRE 480 1104 368 1104
WIRE 480 1152 480 1104
WIRE 1216 1152 1216 1088
FLAG -288 208 0
FLAG 208 448 0
FLAG 1280 192 0
FLAG -192 80 IN
FLAG 256 80 SPLIT
FLAG 320 144 GATE
FLAG 224 272 CAP
FLAG -384 656 VCC
FLAG 416 336 GATEC
FLAG -384 896 VEE
FLAG -400 784 0
FLAG 32 1056 0
FLAG 64 944 CURR_LIMIT
FLAG 144 832 CURR
FLAG 1472 896 GATEC
FLAG 720 896 GATE
FLAG 480 1152 VEE
FLAG 896 944 CURR
FLAG 1216 1152 VEE
FLAG 896 832 CURR_LIMIT
FLAG 368 544 +
FLAG 304 944 -
FLAG 480 800 VCC
FLAG 1216 800 VCC
FLAG 672 80 OUT
FLAG 96 304 0
FLAG -32 480 CURR_RAW
FLAG 736 192 0
FLAG 80 608 0
FLAG 80 480 VCC
FLAG 80 416 CURR
FLAG -32 688 0
DATAFLAG 672 896 ""
DATAFLAG 1392 896 ""
DATAFLAG 816 80 ""
SYMBOL voltage -288 96 R0
WINDOW 123 24 124 Left 2
WINDOW 39 24 124 Left 2
SYMATTR InstName V1
SYMATTR Value 24
SYMBOL voltage 208 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V2
SYMATTR Value 24
SYMBOL res 32 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 20m
SYMBOL voltage -384 672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {VCC}
SYMBOL voltage -384 784 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 0
SYMBOL voltage 32 944 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 1
SYMBOL res 288 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL res 528 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {A*R}
SYMBOL res 1040 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R}
SYMBOL res 1040 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {R}
SYMBOL res 1120 960 M0
SYMATTR InstName R11
SYMATTR Value {A*R}
SYMBOL cap 512 528 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value {1/(A*R*wc)}
SYMBOL res 288 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {R}
SYMBOL res 384 960 M0
SYMATTR InstName R13
SYMATTR Value {A*R}
SYMBOL res 1264 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value {A*R}
SYMBOL cap 1248 544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {1/(A*R*wc)}
SYMBOL nmos 400 128 M270
SYMATTR InstName M1
SYMATTR Value BSC015NE2LS5I
SYMBOL nmos 496 320 M270
SYMATTR InstName M2
SYMATTR Value BSC015NE2LS5I
SYMBOL res 1264 80 R0
SYMATTR InstName R1
SYMATTR Value 2.4
SYMBOL MAX4073T -32 224 R0
SYMATTR InstName U1
SYMBOL load 720 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PWL(0 0 120u 0 121u {Imax-1.5})
SYMBOL res -48 576 R0
SYMATTR InstName R2
SYMATTR Value 1Meg
SYMBOL TLV9362 480 896 R0
SYMATTR InstName U2
SYMBOL TLV9362 1216 896 R0
SYMATTR InstName U4
SYMBOL TLV9352 80 544 R0
SYMATTR InstName U3
TEXT -488 400 Left 2 ;.op
TEXT -488 432 Left 2 !.tran {simtime}
TEXT -488 464 Left 2 ;.ac dec 20 0.01 10G
TEXT -248 768 Left 2 !.param simtime=1m
TEXT 752 432 Left 2 !;.step dec param Imax 1 10 20
TEXT 760 464 Left 2 !.param Imax=10
TEXT -248 728 Left 2 !;.step dec param simtime 100m 10m 7
TEXT 336 1304 Left 2 !.param A=1000 wc=1k R=1k
TEXT 376 1352 Left 2 !;.step dec param A 1k 10k 4
TEXT 336 1272 Left 2 !;.param A=10 wc=1 R=1k
TEXT -616 992 Left 2 !;.step param VCC 30 40 2
TEXT -568 1024 Left 2 !.param VCC=30
TEXT -392 1192 Left 2 !.options abstol=1n reltol=0.001
