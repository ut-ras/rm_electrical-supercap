Version 4
SHEET 1 2876 2360
WIRE -192 80 -288 80
WIRE -160 80 -192 80
WIRE -96 80 -160 80
WIRE -64 80 -96 80
WIRE 48 80 16 80
WIRE 256 80 48 80
WIRE 304 80 256 80
WIRE 592 80 400 80
WIRE 672 80 592 80
WIRE 912 80 672 80
WIRE 912 96 912 80
WIRE -288 112 -288 80
WIRE 320 144 320 128
WIRE -96 160 -96 80
WIRE 48 160 48 80
WIRE 912 192 912 176
WIRE -288 208 -288 192
WIRE 96 224 64 224
WIRE -160 240 -160 80
WIRE -112 240 -160 240
WIRE 96 272 96 224
WIRE 224 272 208 272
WIRE 400 272 224 272
WIRE 592 272 592 80
WIRE 592 272 496 272
WIRE 416 336 416 320
WIRE -32 352 -32 272
WIRE 208 352 208 272
WIRE 96 368 0 368
WIRE 128 368 96 368
WIRE 0 400 0 368
WIRE 16 400 0 400
WIRE 128 416 128 368
WIRE 128 416 80 416
WIRE -32 432 -32 352
WIRE 16 432 -32 432
WIRE 208 448 208 432
WIRE 448 544 368 544
WIRE 608 544 512 544
WIRE 1312 560 1232 560
WIRE 1472 560 1376 560
WIRE 368 672 368 544
WIRE 432 672 368 672
WIRE 608 672 608 544
WIRE 608 672 512 672
WIRE 1232 672 1232 560
WIRE 1296 672 1232 672
WIRE 1472 672 1472 560
WIRE 1472 672 1376 672
WIRE -384 688 -384 656
WIRE -384 784 -384 768
WIRE -384 784 -400 784
WIRE -384 800 -384 784
WIRE 192 832 144 832
WIRE 368 832 368 672
WIRE 368 832 272 832
WIRE 480 832 480 800
WIRE 1072 832 1024 832
WIRE 1232 832 1232 672
WIRE 1232 832 1152 832
WIRE 1344 832 1344 800
WIRE 368 880 368 832
WIRE 416 880 368 880
WIRE 1232 880 1232 832
WIRE 1280 880 1232 880
WIRE -384 896 -384 880
WIRE 608 896 608 672
WIRE 608 896 544 896
WIRE 720 896 608 896
WIRE 1472 896 1472 672
WIRE 1472 896 1408 896
WIRE 1600 896 1472 896
WIRE 416 912 368 912
WIRE 1280 912 1232 912
WIRE 64 944 32 944
WIRE 192 944 64 944
WIRE 304 944 272 944
WIRE 368 944 368 912
WIRE 368 944 304 944
WIRE 1072 944 1024 944
WIRE 1232 944 1232 912
WIRE 1232 944 1152 944
WIRE 32 960 32 944
WIRE 368 976 368 944
WIRE 1232 976 1232 944
WIRE 32 1056 32 1040
WIRE 1232 1088 1232 1056
WIRE 1344 1088 1344 960
WIRE 1344 1088 1232 1088
WIRE 368 1104 368 1056
WIRE 480 1104 480 960
WIRE 480 1104 368 1104
WIRE 480 1152 480 1104
WIRE 1344 1152 1344 1088
FLAG -288 208 0
FLAG 208 448 0
FLAG 912 192 0
FLAG -192 80 IN
FLAG 256 80 SPLIT
FLAG 320 144 GATE
FLAG 224 272 CAP
FLAG -384 656 VCC
FLAG 416 336 GATEC
FLAG -384 896 VEE
FLAG -400 784 0
FLAG 32 1056 0
FLAG 64 944 CURR_LIMIT
FLAG 144 832 CURR
FLAG 1600 896 GATEC
FLAG 720 896 GATE
FLAG 480 1152 VEE
FLAG 1024 944 CURR
FLAG 1344 1152 VEE
FLAG 1024 832 CURR_LIMIT
FLAG 368 544 +
FLAG 304 944 -
FLAG 480 800 VCC
FLAG 1344 800 VCC
FLAG 672 80 OUT
FLAG 96 272 0
FLAG 48 384 VCC
FLAG 48 448 0
FLAG 96 368 CURR
FLAG -32 352 CURR_RAW
DATAFLAG 672 896 ""
DATAFLAG 1520 896 ""
DATAFLAG 816 80 ""
SYMBOL voltage -288 96 R0
WINDOW 123 24 124 Left 2
WINDOW 39 24 124 Left 2
SYMATTR InstName V1
SYMATTR Value 24
SYMBOL voltage 208 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V2
SYMATTR Value 24
SYMBOL res 32 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 20m
SYMBOL voltage -384 672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {VCC}
SYMBOL voltage -384 784 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 0
SYMBOL voltage 32 944 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 1
SYMBOL res 288 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {R}
SYMBOL res 528 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {A*R}
SYMBOL res 1168 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R}
SYMBOL res 1168 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {R}
SYMBOL res 1248 960 M0
SYMATTR InstName R11
SYMATTR Value {A*R}
SYMBOL cap 512 528 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value {1/(A*R*wc)}
SYMBOL res 288 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {R}
SYMBOL res 384 960 M0
SYMATTR InstName R13
SYMATTR Value {A*R}
SYMBOL res 1392 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value {A*R}
SYMBOL cap 1376 544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {1/(A*R*wc)}
SYMBOL nmos 400 128 M270
SYMATTR InstName M1
SYMATTR Value BSC015NE2LS5I
SYMBOL nmos 496 320 M270
SYMATTR InstName M2
SYMATTR Value BSC015NE2LS5I
SYMBOL res 896 80 R0
SYMATTR InstName R1
SYMATTR Value 6
SYMBOL MAX4073T -32 224 R0
SYMATTR InstName U1
SYMBOL OpAmps\\UniversalOpAmp3 48 416 R0
SYMATTR InstName U4
SYMBOL TL07XH_TL08XH 480 896 R0
SYMATTR InstName U2
SYMBOL TL07XH_TL08XH 1344 896 R0
SYMATTR InstName U3
TEXT -488 400 Left 2 !.op
TEXT -488 432 Left 2 ;.tran {simtime} startup uic
TEXT -488 464 Left 2 ;.ac dec 20 0.01 10G
TEXT -232 568 Left 2 !.param simtime=10m
TEXT 752 432 Left 2 !;.step dec param Imax 1 10 20
TEXT 760 464 Left 2 !.param Imax=4
TEXT -232 536 Left 2 !;.step dec param simtime 100m 10m 7
TEXT 336 1304 Left 2 !.param A=1000 wc=2.5k R=1000
TEXT 376 1352 Left 2 !;.step dec param A 1k 10k 4
TEXT 336 1272 Left 2 !;.param A=10 wc=1 R=1k
TEXT -616 992 Left 2 !;.step param VCC 30 40 2
TEXT -568 1024 Left 2 !.param VCC=30
TEXT -392 1192 Left 2 !.options abstol=1n reltol=0.001
